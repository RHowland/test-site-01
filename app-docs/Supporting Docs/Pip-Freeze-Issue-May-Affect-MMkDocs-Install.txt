

Pip Freeze Issue - May Affect MMkDocs Install.txt

---------------------------------------------------------------------

The requirements.txt file is an instruction set for pip to 
	install various dependencies of the virtual environment,python,
	mkdocs, and mmkdocs dependencies itself. 
	
	So why not just complete a default mkdocs installation in 
	the first place? To maintain the documentation,content,
	and configurations settings 
	- including the build configuration to deploy Mmkdocs locally 
    and online - we cannot merely clone the git repo (which is in 
	effect just copy/pasting it - with the 
    exception of git configuration settings);

    We use a method called pip freeze in the original repository to 
	serialise (save) the exact dependencies and configurations for the
    repository (and system) from which it came. 

    Similar to json - this is python's standard way to make sure the 
	environment can be moved between systems and behave in the same 
	manner.

    This is especially important with regards to plugins in the mkdocs
    community which are easily susceptible to bugs, errors and exceptions
    if taken out of their originaln installed environment.

    For errors,bugs,or exceptions with 'pip freeze' or 'pip install 
	requirements.txt' in this regard please read on;
	
	If there are still issues with pip install or running mmkdocs - 
	please refer to appendix B to utilize the 'UV' command.
	
--------------------------------------------------------------------------
	
	a. Supporting resources;
	
	-  https://www.youtube.com/watch?v=OL5eo4cJFh8
	   (for pip-audit command)
	   
	-  https://www.youtube.com/watch?v=0Jk7RbphY0A
       (for pip check command)	
	
	-  https://www.redhat.com/en/blog/find-python-vulnerabilities 
	   (for reference only)

---------------------------------------------------------------------------	
-------------------------------------------------
	
Pip install and Pip Freeze
 
---------------------------------------------------------------------------	
	
This section has two parts. 'Pip Freeze' creates a requirements.txt file 
and 'Pip install -r requirements.txt' installs the result of the 
'Pip Freeze'command. Generally, it's standard practice to run pip freeze often to 
make sure the dependencies are up to date ;

   1. 'Pip install -r requirements.txt';

     a.  A 'requirements.txt' file is required
    

     b.  Update pip as shown in appendix A
 

     c.  Make sure you are in a virtual environment 
         as shown in appendix A
	  
     d.  install and run pip-audit as shown in 
         Appendix A
	  
	     Pip-audit checks for security vulnerabilites and outdated packages

     e.  run pip check (no need to install) as shown in
         Appendix A
	  
	     Verifies installed packages have the correct dependencies

     f.  install and run check-requirements-txt as shown in Appendix A  
	  
	  Checks if you have dependencies missing (or unused) 
	  in requirements.txt
	  
	 g. Install and run pip-outdated 
	 
	  Even if all dependencies are correct and at the correct version,
	  you may want to check if there are newer versions available in PyPi
	  
	 
	  
----------------------------	  
      
   2. 'Pip Freeze';  

     a.  Make sure you are inside of a virtual environment as shown 
	    in Appendix A	
	
     b.  Make sure the virtual environment has been activated as shown 
	    in Appendix A
		
     c.  pip freeze > requirements.txt	
	 
	 
	
	
	
---------------------------------------------------------------------	

Appendix A 	

---------------------------------------------------------------------

    a. Update pip:

>  python -m pip install --upgrade pip (if error: 'choco install pip')
   -----------------------------------

   Expected output:

     Requirement already satisfied: pip in c:\..\venv\lib\site-packages 
	 (25.2)
   Collecting pip
     Downloading pip-25.3-py3-none-any.whl.metadata (4.7 kB)
   Downloading pip-25.3-py3-none-any.whl (1.8 MB)
      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 1.8 MB/s  0:00:01
   Installing collected packages: pip
     Attempting uninstall: pip
       Found existing installation: pip 25.2
       Uninstalling pip-25.2:
         Successfully uninstalled pip-25.2
   Successfully installed pip-25.3
   
    b. Confirm pip version:

>   pip --version
    -----------------------------------

    Expected output: pip 25.2 from C:\Users...\Lib\site-packages\pip 
    (python 3.13)	
   
    c. Setup a Python virtual environment

>   python -m venv venv
    -----------------------------------

    Expected Output:
	
	The directory will now have a venv folder.
	This folder contains the various scripts to 
	initiate a vietual environment.
	
    d. Activate the python virtual environment

>   .\venv\Scripts\activate
    -----------------------------------

    Expected Output: 

    Command line should be preceded by '(venv)'

	e. Install/upgrade pip-audit

>   python -m pip install pip-audit
    -----------------------------------

    Expected Output:

    Collecting pip-audit
    Using cached pip_audit-2.9.0-py3-none-any.whl.metadata (27 kB)
    Collecting CacheControl>=0.13.0 (from CacheControl[filecache]>=0.13.0->pip-audit)
    Using cached cachecontrol-0.14.3-py3-none-any.whl.metadata (3.1 kB)
    Collecting cyclonedx-python-lib<10,>=5 (from pip-audit)
	...
	...
	...
	Successfully installed CacheControl-0.14.3 boolean.py-5.0
	
    
    f. Run pip-audit

>   'pip-audit' or 'pip-audit -r requirements.txt'
    -----------------------------------

    Expected Output:
	
	No known vulnerabilities found
	
	
	g. Run pip check 

>   python -m pip check
    -----------------------------------

    Expected Output:
	
	No broken requirements found.
	
	pip check is built into pip ,so there is no need to install it.
	
	
	h. Install check-requirements

>   python -m pip install check-requirements-txt
    -----------------------------------

    Expected Output:
	
	Collecting check-requirements-txt
    Downloading check_requirements_txt-1.4.1-py3-none-any.whl.metadata (6.5 kB)
    Requirement already satisfied: packaging in c:\user
    Downloading check_requirements_txt-1.4.1-py3-none-any.whl (12 kB)
    Installing collected packages: check-requirements-txt
    Successfully installed check-requirements-txt-1.4.1
	
	No broken requirements found.
	
	i. Run check-requirements

>   check-requirements-txt . -r requirements.txt
    -----------------------------------

    Expected Output:
	
	none
	
	j. Install check-requirements

>   python -m pip install pip-outdated
    -----------------------------------

    Expected Output:
	
	Collecting pip-outdated
    Downloading pip_outdated-0.8.0-py3-none-any.whl.metadata (3.5 kB)
    Collecting aiohttp~=3.12 (from pip-outdated)
    Downloading aiohttp-3.13.2-cp313-cp313-win_amd64.whl.metadata (8.4 kB)
    Collecting colorama~=0.4.6 (from pip-outdated)
    Using cached colorama-0.4.6-py2.py3-none-any.whl.metadata (17 kB)
	...
	...
	...
	Installing collected packages: terminaltables
	Successfully installed aiohappyeyeballs-2.6.1
	
	
	k. Run pip-outdated

>   pip-outdated requirements.txt
    -----------------------------------

    Expected Output: 
	
	Red = unavailable/outdated/out of version specifier
    Green = updatable
+----------------------------+-----------+-------------+-------------+
| Name                       | Installed | Wanted      | Latest      |
+----------------------------+-----------+-------------+-------------+
| babel                      | None      | 2.17.0      | 2.17.0      |
| backrefs                   | None      | 5.9         | 6.0.1       |
| certifi                    | 2025.10.5 | 2025.8.3    | 2025.10.5   |
| charset-normalizer         | 3.4.4     | 3.4.3       | 3.4.4       |
| click                      | None      | 8.2.1       | 8.3.0       |
| ghp-import                 | None      | 2.1.0       | 2.1.0       |
| idna                       | 3.11      | 3.10        | 3.11        |
| Jinja2                     | None      | 3.1.6       | 3.1.6       |
| Markdown                   | None      | 3.9         | 3.10        |
| MarkupSafe                 | None      | 3.0.2       | 3.0.3       |
| mergedeep                  | None      | 1.3.4       | 1.3.4       |
| mkdocs                     | None      | 1.6.1       | 1.6.1       |
| mkdocs-get-deps            | None      | 0.2.0       | 0.2.0       |
| mkdocs-material            | None      | 9.6.20      | 9.7.0       |
| mkdocs-material-extensions | None      | 1.3.1       | 1.3.1       |
| paginate                   | None      | 0.5.7       | 0.5.7       |
| pathspec                   | None      | 0.12.1      | 0.12.1      |
| platformdirs               | 4.5.0     | 4.4.0       | 4.5.0       |
| pymdown-extensions         | None      | 10.16.1     | 10.17.1     |
| python-dateutil            | None      | 2.9.0.post0 | 2.9.0.post0 |
| PyYAML                     | None      | 6.0.2       | 6.0.3       |
| pyyaml_env_tag             | None      | 1.1         | 1.1         |
| six                        | None      | 1.17.0      | 1.17.0      |
| watchdog                   | None      | 6.0.0       | 6.0.0       |
+----------------------------+-----------+-------------+-------------+
	
	Systems are far from perfect - as is python, pip and mmkdocs -
	This can give the user a microscope into the requirements.txt 
	file if all the dependencies are up to the date with the 
	requirements of mkdocs, BUT not the latest version. Updating 
	to the latest version is in most cases the easiest way to solve 
	compatibility issues - especially if the user is stuck in mmkdocs 
	tunnel vision - seeing that all the requirements are met for mmkdocs 
	(ie the requirements.txt file) is merely the requirements set out by the 
	developers and may not factor in niche ,new, or recently 
	patched plugins or strange conflicts.
	
	In windows an error will occur most times when first running 
	pip-outdated requirements.txt.
    
    Debugging suggests the requirements.txt 
    file should be saved in UTF-8 and not in UTF-16. 
	The requirements.txt file has to be converted in a developer editor - 
	using a normal editor will not work.

    Below are two methods using vscode and notepad++;

    Recommended Tool: Visual Studio Code (VS Code)
    -  Open the file in VS Code.

    -  Look at the bottom status bar on the right side. It will currently show UTF-16 LE (or similar).

    -  Click on the encoding status (UTF-16 LE). A menu will pop up.

    -  Select "Save with Encoding."

    -  Choose "UTF-8" (this option in VS Code and most developer editors is UTF-8 without BOM).

    -  Crucially, set the default for your workspace: VS Code has a feature to enforce the encoding for certain files.

    -  Create a file named .editorconfig in the root directory of your project (where requirements.txt is).

    -  Add the following content to it:	
	
	    `root = true

         [*]
         charset = utf-8`
		 
		 
	Alternative Tool: Notepad++
    - Open the file in Notepad++.

    - Go to the Encoding menu.

    - Select "Convert to UTF-8 (without BOM)".

    - Save the file.	 
    
    
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	


Goal: explain a Windows-specific “pip freeze” gotcha that can block installing MkDocs Material.

Here’s the short version: on Windows 10, using 
`pip freeze > requirements.txt` can capture entries as local file URLs
or editable/VCS lines (for example, `package @ file:///C:/...`) 
instead of plain version pins. When you later run 
`pip install -r requirements.txt` on the same PC or another machine,
those frozen paths often do not exist anymore, so installs fail. 
This can bite MkDocs Material because it relies on several packages 
(mkdocs, mkdocs-material-extensions, pymdown-extensions, etc.), and 
a bad freeze makes pip think it must fetch from a local path rather 
than PyPI. A known `pip freeze` bug in older pip versions produced 
exactly these pathy lines; 
upgrading pip or regenerating the lock file fixes it. ([Stack Overflow][1])

What this looks like

1. You run:

   * `pip freeze > requirements.txt`
   * Later, `pip install -r requirements.txt`
2. Pip errors resemble:

   * “No such file or directory: file:///C:/Users/.../somepackage”
   * “Could not find a version that satisfies mkdocs-material-extensions…”
     These arise because the freeze recorded a local or pre-release 
	 source instead of a normal version pin, or because mkdocs and the theme 
	 were installed into different locations with different tools. ([Stack Overflow][1])

Why it happens

* Older pip (notably 20.1 era) had a bug where `pip freeze` output 
  local `file:///` URLs for some installs. Re-using that requirements.txt 
  later breaks installs. ([Stack Overflow][1])
* Mixing installers (mkdocs via system package manager like 
  winget/choco/apt and Material via pip) puts pieces in different places; 
  MkDocs then cannot see the theme, or your freeze reflects a mismatched 
  environment. 
  ([mrkeo.github.io][2])
* Freezing from the wrong interpreter (for example, store Python vs 
  venv Python) records the wrong site-packages. 
  MkDocs’ docs do show using `pip freeze`, but you must do it inside 
  the exact venv you will install from. ([squidfunk.github.io][3])

How to avoid and fix on Windows 10 Pro (step-by-step)

1. Use a clean venv and the right interpreter.

   * In PowerShell:

     ```powershell
     # create_venv.ps1                      # create a clean venv
     py -3.12 -m venv .venv                 # make a Windows venv
     .\.venv\Scripts\Activate.ps1           # activate venv
     python -m pip install --upgrade pip    # upgrade pip to avoid old freeze bugs
     ```

     Explanation: Use `python -m pip` to guarantee you are invoking pip for this venv.

2. Install MkDocs Material fresh, from PyPI only.

   ```powershell
   # install_material.ps1                   # install mkdocs-material cleanly
   python -m pip install mkdocs-material    # install theme and deps
   ```

   Explanation: Avoid mixing installers like winget/choco for mkdocs and pip for the theme; keep both via pip. ([mrkeo.github.io][2])

3. Generate a safe requirements file.
   Option A: If you hit the pathy-freeze problem, prefer this:

   ```powershell
   # freeze_safe.ps1                        # safer freeze on Windows
   python -m pip list --format=freeze > requirements.txt   # workaround for old freeze bug
   ```

   Explanation: This avoids the “local file URL” entries some pip versions wrote. ([Stack Overflow][1])

   Option B: If you want fully pinned, reproducible builds and fewer surprises, use pip-tools:

   ```powershell
   # pip_tools_lock.ps1                     # make a proper lock
   python -m pip install pip-tools          # install pip-tools in venv
   echo "mkdocs-material" > requirements.in # declare top-level deps
   pip-compile --generate-hashes            # produce requirements.txt with pins
   pip-sync                                  # install exactly the pins
   ```

   Explanation: Pin only top-level deps in requirements.in; compile resolves exact, reproducible versions. This avoids freezing transient local paths and stray globals. General best practice.

4. Verify what got frozen.

   ```powershell
   # verify_freeze.ps1                      # confirm no file URLs
   Select-String -Path requirements.txt -Pattern "file://|git\+|^-e" | Measure-Object
   ```

   Explanation: Count any lines with file URLs, git+ VCS refs, or editable flags; your requirements.txt should contain only `name==version` for portability.

5. If requirements.txt already contains bad lines, fix it.

   * Regenerate inside the venv with `pip list --format=freeze` or pip-tools.
   * Or manually remove lines with `@ file:///...` and `-e .` unless you truly intend them.
   * Then re-install:

     ```powershell
     # reinstall_from_requirements.ps1      # clean reinstall from good pins
     python -m pip install --no-cache-dir --upgrade -r requirements.txt
     ```

6. Confirm MkDocs sees the Material theme.

   ```powershell
   # sanity_check.ps1                       # confirm theme is discoverable
   python -m pip show mkdocs-material       # should show Location and Version
   mkdocs --version                         # mkdocs should run in this venv
   mkdocs new demo && cd demo               # scaffold sample site
   notepad mkdocs.yml                       # set: theme: material
   mkdocs serve                             # test localhost
   ```

   Explanation: If mkdocs cannot find the theme, you likely mixed installers; reinstall both via pip inside the same venv. ([mrkeo.github.io][2])

References for further reading

* Material for MkDocs docs mention `pip freeze` for reproducible builds; use it inside the correct venv and with a modern pip. ([squidfunk.github.io][3])
* Known `pip freeze` bug producing local file paths; workaround is `pip list --format=freeze`. ([Stack Overflow][1])
* Common MkDocs on Windows mis-install: mixing system package managers and pip causes theme discovery failures. ([mrkeo.github.io][2])

If you want, I can generate a minimal, Windows-ready `requirements.in` and a compiled `requirements.txt` tailored for MkDocs Material so your Windows 10 installs are deterministic and clean.

[1]: https://stackoverflow.com/questions/62885911/pip-freeze-creates-some-weird-path-instead-of-the-package-version?utm_source=chatgpt.com "pip freeze creates some weird path instead of the package ..."
[2]: https://mrkeo.github.io/troubleshooting/?utm_source=chatgpt.com "Troubleshooting - Material for MkDocs"
[3]: https://squidfunk.github.io/mkdocs-material/getting-started/?utm_source=chatgpt.com "Installation - Material for MkDocs - GitHub Pages"
